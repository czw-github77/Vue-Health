webpackJsonp([10],{N3it:function(e,t,n){"use strict";(function(e){var a=n("Gu7T"),o=n.n(a),r=n("Dd8w"),s=n.n(r),i=n("NYxO");t.a={name:"search",data:function(){return{key:"",page:1,search_state:"recommend",searchJson:[],hotJson:[],keyWords:null,history:{},bottomLock:!1,bottomStatus:"loading",bottomTip:!1,loading:!1,error:!1}},watch:{$route:function(e,t){t.path.includes("index")&&(this.key="",this.search_state="recommend")},key:function(e){e||(this.search_state="recommend")}},methods:s()({},Object(i.b)("search",["get_hot_data","get_search_data"]),{get_hot:function(){var e=this;this.loading=!0,this.get_hot_data().then(function(t){t.data&&(e.hotJson=t.data),t.keyword&&(e.keyWords=t.keyword),e.loading=!1}).catch(function(t){console.log(t),e.loading=!1})},get_search:function(){var t=this;this.key&&(this.error=!1,this.loading=!0,this.search_state="search",e("#search .container").scrollTop(0),this.$router.replace("/search?key="+this.key),this.get_search_data({key:this.key,page:1}).then(function(e){e.data?(t.searchJson=e.data,t.page=2,t.handleLocaltion("get")):(t.searchJson=[],t.search_state="empty"),t.loading=!1}).catch(function(e){console.log(e),t.search_state="empty",t.loading=!1,t.error=!0}))},get_search_more:function(){var e=this;"noData"!==this.bottomStatus&&(this.bottomLock=!0,this.get_search_data({key:this.key,page:this.page}).then(function(t){if(t.data){var n;(n=e.searchJson).push.apply(n,o()(t.data)),e.page++}else e.bottomStatus="noData";e.bottomLock=!1}))},bottomVisible:function(){var t=this;this.$nextTick(function(){e("#search .listItem").height()>=e("#search .container").height()&&(t.bottomTip=!0)})},handleLocaltion:function(t){var n=this;"get"===t?this.$nextTick(function(){n.bottomVisible(),n.history&&n.history[n.key]&&e("#search .container").scrollTop(n.history[n.key].location)}):"set"===t&&this.key&&(this.history[this.key]={location:e("#search .container").scrollTop(),data:this.searchJson})}}),mounted:function(){this.get_hot()},activated:function(){this.$route.query.key&&(this.key=this.$route.query.key,this.history[this.key]&&this.history[this.key].data?(this.searchJson=this.history[this.key].data,this.search_state="search",this.handleLocaltion("get")):this.get_search())},deactivated:function(){this.handleLocaltion("set")}}}).call(t,n("7t+N"))},PKIZ:function(e,t,n){var a=n("kxFB");t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n#search {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background: #fff;\n}\n#search a {\n  text-decoration: none;\n}\n#search .search_top {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 999;\n}\n#search .search_top header {\n  background: #fff;\n  padding-right: 0.27rem;\n  border-bottom: 1px solid #eee;\n  background: #f4f5f6;\n}\n#search .search_top header .form {\n  position: relative;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  color: #aaa;\n  font-size: 14px;\n  background: #fff;\n  border: 1px solid #ddd;\n  border-radius: 50px;\n  padding: 0.13rem 0.267rem;\n  margin: 0 0.267rem;\n}\n#search .search_top header .form .form_input {\n  width: 100%;\n  color: #666;\n  padding-left: 0.13rem;\n  margin: 0;\n  outline: none;\n  -webkit-appearance: none;\n}\n#search .search_top header .form .form_input::-webkit-input-placeholder {\n  color: #c8c8c9;\n  font-size: 12px;\n}\n#search .search_top header .form .form_input::-moz-placeholder {\n  color: #c8c8c9;\n  font-size: 12px;\n}\n#search .search_top header .form .form_input:-ms-placeholder {\n  color: #c8c8c9;\n  font-size: 12px;\n}\n#search .search_top header .search_btn {\n  color: #aaa;\n  font-size: 14px;\n}\n#search .search_top header .search_btn.on {\n  color: #00939c;\n  font-weight: bold;\n}\n#search .content {\n  background: #fff;\n}\n#search .content .search_recommend {\n  position: relative;\n  height: 100%;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n}\n#search .content .search_recommend .keyword {\n  padding-top: 0.27rem;\n}\n#search .content .search_recommend .keyword .keyword_wrap {\n  padding: 0 0.4rem;\n}\n#search .content .search_recommend .keyword .keyword_wrap span {\n  display: inline-block;\n  font-size: 13px;\n  padding: 0.13rem 0.26rem;\n  margin: 0 0.26rem 0.26rem 0;\n  color: #403d3c;\n  background: #f4f5f6;\n  border-radius: 4px;\n}\n#search .content .search_recommend .keyword .gray_line {\n  height: 0.13rem;\n  background: #f4f5f6;\n}\n#search .content .search_recommend .article {\n  padding: 0.27rem 0.4rem 0;\n}\n#search .content .search_recommend .article h3 {\n  font-size: 15px;\n  color: #403d3c;\n  margin-bottom: 5px;\n}\n#search .content .search_recommend .article h3 .hot_icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 24px;\n  height: 24px;\n  background: url("+a(n("fy6o"))+') no-repeat center center;\n  background-size: 24px;\n  margin-right: 0.13rem;\n}\n#search .content .search_recommend .article h3 span {\n  display: inline-block;\n  vertical-align: middle;\n  margin-top: 2px;\n}\n#search .content .search_recommend .article ul {\n  position: relative;\n  height: 100%;\n}\n#search .content .search_recommend .article ul li {\n  font-size: 14px;\n  color: #717071;\n  border-bottom: 1px solid #eee;\n}\n#search .content .search_recommend .article ul li a {\n  display: block;\n  width: 100%;\n  padding: 0.27rem 0;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  text-align: justify;\n}\n#search .content .search_recommend .article ul li span {\n  margin-right: 0.24rem;\n}\n#search .content .search_recommend .article ul li span.hot {\n  color: #00939c;\n}\n#search .content .search_result-empty {\n  position: absolute;\n  width: 100%;\n  height: 150px;\n  top: 40%;\n  margin-top: -75px;\n  padding: 70px 0 0;\n  background: url("http://s3.pstatp.com/image/toutiao_mobile/noresuiticon_seach.png") no-repeat center top;\n  background-size: 68px;\n  text-align: center;\n  color: #cacaca;\n  font-size: 16px;\n}\n',""])},a36o:function(e,t,n){var a=n("PKIZ");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("4f26d08d",a,!0,{})},fy6o:function(e,t,n){e.exports=n.p+"static/img/hot.7423050.png"},vCr1:function(e,t,n){"use strict";function a(e){n("a36o")}Object.defineProperty(t,"__esModule",{value:!0});var o=n("N3it"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"search"}},[n("div",{staticClass:"search_top"},[n("my-header",{staticClass:"header"},[n("a",{staticClass:"back-black",attrs:{slot:"left"},on:{click:function(t){t.stopPropagation(),e.$router.go(-1)}},slot:"left"}),e._v(" "),n("form",{staticClass:"form",attrs:{slot:"mid"},on:{submit:function(t){t.preventDefault(),e.get_search(t)}},slot:"mid"},[n("i",{staticClass:"form_icon icon-search"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.key,expression:"key",modifiers:{trim:!0}}],staticClass:"form_input",attrs:{type:"search",placeholder:"搜头条，知健康"},domProps:{value:e.key},on:{input:function(t){t.target.composing||(e.key=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("a",{staticClass:"search_btn",class:e.key?"on":"",attrs:{slot:"right"},on:{click:function(t){t.stopPropagation(),e.get_search(t)}},slot:"right"},[e._v("搜索")])])],1),e._v(" "),n("div",{directives:[{name:"swiper",rawName:"v-swiper:swiperRight",value:!0,expression:"true",arg:"swiperRight"}],staticClass:"content",class:{isIOS:"ios"==e.$store.state.device}},["recommend"===e.search_state?[n("div",{staticClass:"search_recommend"},[e.keyWords?n("div",{staticClass:"keyword"},[n("div",{staticClass:"keyword_wrap"},e._l(e.keyWords,function(t,a){return n("span",{key:a,on:{click:function(n){n.stopPropagation(),e.$router.replace("/search?key="+t)}}},[e._v(e._s(t))])})),e._v(" "),n("div",{staticClass:"gray_line"})]):e._e(),e._v(" "),n("div",{staticClass:"article"},[e._m(0),e._v(" "),e.hotJson.length>0?n("ul",e._l(e.hotJson,function(t,a){return n("li",{key:a},[n("router-link",{attrs:{to:"/detail?classid="+t.classid+"&id="+t.id+"&datafrom="+t.datafrom}},[n("span",{class:a+1>0&&a+1<4?"hot":""},[e._v(e._s(a+1)+".")]),e._v("\n                                "+e._s(t.title)+"\n                            ")])],1)})):e._e()])])]:e._e(),e._v(" "),"search"===e.search_state?[n("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.get_search_more,expression:"get_search_more"}],staticClass:"container",attrs:{"infinite-scroll-disabled":"bottomLock","infinite-scroll-distance":"10","infinite-scroll-immediate-check":"false"}},[e.searchJson.length>0?n("list-item",{attrs:{itemJson:e.searchJson}}):e._e(),e._v(" "),e.bottomTip?n("div",{staticClass:"bottomLoad"},[n("div",{directives:[{name:"show",rawName:"v-show",value:"loading"==e.bottomStatus,expression:"bottomStatus == 'loading'"}],staticClass:"loading"},[e._v("加载中...")]),e._v(" "),"noData"==e.bottomStatus?n("div",{staticClass:"noData"},[e._v("没有更多的内容了")]):e._e()]):e._e()],1)]:e._e(),e._v(" "),"empty"==e.search_state&&0===e.searchJson.length?[e._m(1)]:e._e()],2),e._v(" "),n("my-loading",{attrs:{visible:e.loading}}),e._v(" "),n("my-error",{attrs:{fixed:"",visible:e.error,method:e.get_search}})],1)},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h3",[n("i",{staticClass:"hot_icon"}),e._v(" "),n("span",[e._v("今日热点")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search_result-empty"},[n("p",[e._v("这个宇宙中搜寻不到")]),e._v(" "),n("p",[e._v("换个词试试")])])}],i={render:r,staticRenderFns:s},c=i,h=n("VU/8"),l=a,d=h(o.a,c,!1,l,null,null);t.default=d.exports}});